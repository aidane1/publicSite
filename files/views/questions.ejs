<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" name = "viewport" content = "width=device-width, initial-scale=1.0">
    <title></title>
    <script>
      window.onload  = function() {




        let currentElement;
        let startValue;
        let finished = false;
        document.addEventListener("touchstart", function(event) {
          let xVal = (event.touches["0"].clientX);
          startValue = xVal;

          let selectedElement = event.target.parentNode;
          if (selectedElement.classList.contains("question")) {
            currentElement = selectedElement;
          } else {
            currentElement = false;
          }
        });

        document.addEventListener("touchmove", function(event) {
          if (!currentElement) {

          } else {
            let xVal = event.touches["0"].clientX;
            currentElement.style.right = (startValue - xVal).toString() + "px";

            if (startValue - xVal > 100 && !finished) {
              finished = true;
              currentElement.childNodes[5].classList.add("boxFull");
            }
            if (finished && (startValue - xVal < 100)) {
              finished = false;
              currentElement.childNodes[5].classList.remove("boxFull");
            }
          }

        });
        document.addEventListener("touchend", function(event) {

          if (!currentElement) {

          } else {
            let acceleration = 100;
            let preVelocity = 0;
            let velocity = 0;
            var ourInterval = setInterval(function() {
              preVelocity += acceleration;
              velocity = (Math.sqrt(preVelocity));
              if (velocity > 10) {
                velocity = 10;
              }

              var interval = (parseInt(currentElement.style.right) > 0 ? 1 : -1);


              currentElement.style.right = (parseInt(currentElement.style.right) - interval*8).toString() + "px";

              if ((parseInt(currentElement.style.right) > 0 && parseInt(currentElement.style.right) < 11) || (parseInt(currentElement.style.right) < 0 && parseInt(currentElement.style.right) > -11)) {
                var replyBoxes = document.getElementsByClassName("replyBox");
                for (var i = 0; i < replyBoxes.length; i++) {
                  replyBoxes[i].classList.remove("boxFull");
                }
                currentElement.style.right = "0px";
                clearInterval(ourInterval);
                if (finished) {
                  console.log("hazah! you replied");
                }
                currentElement = "";
                startValue = 0;
                finished = false;
              }

            }, 2);
          }





        });
      }
    </script>
    <style>
      * {
        font-family: sans-serif;
        box-sizing: border-box;
      }
      html {
        width: 100%;
        height: 100%;
        margin: 0px;
        padding: 0px;
      }
      body {
        width: 100%;
        height: 100%;
        margin: 0px;
        padding: 0px;
      }
      .questionHolder {
        width: 100%;
        height: 100%;
        /* overflow-y: auto; */
        position: fixed;
        top: 0px;
        left: 0px;
        background-color: black;

      }
      .question {
        color: #eee;
        padding-top: 5px;
        padding-bottom: 5px;
        border-bottom: 1px solid grey;
        border-top: 1px solid grey;
        margin-top: 5px;
        margin-bottom: 5px;
        position: relative;
        right: 0px;


      }
      .replyBox {
        width: 100%;
        height: 100%;
        position: absolute;
        right: -100%;
        top: 0px;
        background-color: #004720;
      }
      .boxFull {
        background-color: #28bf41;
      }


      .submittedBy {
        font-size: 10px;
      }
      .reply {
        font-size: 15px;
        height: 15px;
        position: absolute;
        top: 30%;

      }
    </style>
  </head>
  <body>
    <div class = "questionHolder">
      <div class = "question">
        <div class = "questionTitle">
          Loreum ipsum dolor sit amet, consectuer cor di amen ?
        </div>
        <div class = "submittedBy">
          by: AidanEglin
        </div>
      </div>
      <div class = "question">
        <div class = "questionTitle">
          Loreum ipsum dolor sit amet, consectuer cor di amen ?
        </div>
        <div class = "submittedBy">
          by: AidanEglin
        </div>
      </div>
      <div class = "question">
        <div class = "questionTitle">
          Loreum ipsum dolor sit amet, consectuer cor di amen ?
        </div>
        <div class = "submittedBy">
          by: AidanEglin
        </div>
      </div>
      <div class = "question">
        <div class = "questionTitle">
          Loreum ipsum dolor sit amet, consectuer cor di amen ?
        </div>
        <div class = "submittedBy">
          by: AidanEglin
        </div>
      </div>
      <div class = "question">
        <div class = "questionTitle">
          Loreum ipsum dolor sit amet, consectuer cor di amen ?
        </div>
        <div class = "submittedBy">
          by: AidanEglin
        </div>
      </div>
      <div class = "question">
        <div class = "questionTitle">
          Loreum ipsum dolor sit amet, consectuer cor di amen ?
        </div>
        <div class = "submittedBy">
          by: AidanEglin
        </div>
        <div class = "replyBox">
          <div class = "reply">
            REPLY
          </div>
        </div>
      </div>
      <div class = "question">
        <div class = "questionTitle">
          Loreum ipsum dolor sit amet, consectuer cor di amen ?
        </div>
        <div class = "submittedBy">
          by: AidanEglin
        </div>
      </div>
    </div>
  </body>
</html>


<!-- <div class = "question">
  <div class = "questionTitle">
    Loreum ipsum dolor sit amet, consectuer cor di amen ?
  </div>
  <div class = "submittedBy">
    by: AidanEglin
  </div>
  <div class = "replyBox">
    <div class = "reply">
      REPLY
    </div>
  </div>
</div> -->
